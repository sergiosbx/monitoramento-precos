import os
import re

_confs = re.split(r"\://|:|\@|/", os.environ['DATABASE_URL'])

# DATABASE
DATABASE_BASE_URL = _confs[3]
DATABASE_PORT = _confs[4]
DATABASE_NAME = _confs[5]
DATABASE_USERNAME = _confs[1]
DATABASE_PASSWORD = _confs[2]
DATABASE_CONNECT_TIMEOUT = os.environ.get('DATABASE_CONNECT_TIMEOUT', '30')
DATABASE_MAX_CONNECTIONS = os.environ.get('DATABASE_MAX_CONNECTIONS', '10')
QUERYS_DIR = "querys"

# MAILER
MAIL_USERNAME = os.environ.get('MAIL_USERNAME')
MAIL_PASSWORD = os.environ.get('MAIL_PASSWORD')
MAIL_SUBJECT = "META DE PRE√áO ALCAN√áADA! ü§ë"
MAIL_TEMPLATE_HEADER = """
<head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <style type="text/css"> @import url(http://fonts.googleapis.com/css?family=Droid+Sans); img{max-width: 600px; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;}a{text-decoration: none; border: 0; outline: none; color: #bbbbbb;}a img{border: none;}td, h1, h2, h3{font-family: Helvetica, Arial, sans-serif; font-weight: 400;}td{text-align: center;}body{-webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; width: 100%; height: 100%; color: #37302d; background: #ffffff; font-size: 16px;}table{border-collapse: collapse !important;}.headline{color: #ffffff; font-size: 36px;}.force-full-width{width: 100% !important;}.force-width-80{width: 80% !important;}#metaPrice{background-color: #178f8f; border-radius: 4px; color: #ffffff; display: inline-block; font-family: Helvetica, Arial, sans-serif; font-size: 36px; font-weight: bold; line-height: 50px; text-align: center; text-decoration: none; width: 200px; -webkit-text-size-adjust: none;}#metaPrice:hover{color: #eefbac; font-size: 42px;}.sucint{color: #666666;}</style> <style type="text/css" media="screen"> @media screen{/*Thanks Outlook 2013! http://goo.gl/XLxpyl*/ td, h1, h2, h3{font-family: 'Droid Sans', 'Helvetica Neue', 'Arial', 'sans-serif' !important;}}</style> <style type="text/css" media="only screen and (max-width: 480px)"> @media only screen and (max-width: 480px){table[class="w320"]{width: 320px !important;}td[class="mobile-block"]{width: 100% !important; display: block !important;}}</style> </head>
"""
MAIL_TEMPLATE_BODY = """
<body class="body" style="padding:0; margin:0; display:block; background:#ffffff; -webkit-text-size-adjust:none" bgcolor="#ffffff"> <table align="center" cellpadding="0" cellspacing="0" class="force-full-width" height="100%"> <tr> <td align="center" valign="top" bgcolor="#ffffff" width="100%"> <center> <table style="margin: 0 auto;" cellpadding="0" cellspacing="0" width="600" class="w320"> <tr> <td align="center" valign="top"> <table style="margin: 0 auto" cellpadding="0" cellspacing="0" class="force-full-width" bgcolor="#4dbfbf"> <tr> <td> <br><img src="https://www.filepicker.io/api/file/carctJpuT0exMaN8WUYQ" width="224" height="240" alt="robot picture"> </td></tr><tr> <td class="headline"> Boas not√≠cias! </td></tr><tr> <td> <center> <table style="margin: 0 auto;" cellpadding="0" cellspacing="0" width="90%"> <tr> <td style="color:#187272;"> <br>Sua meta de pre√ßo para <span style="color: #ffffff;">{description}</span> foi alcan√ßada <br><br></td></tr></table> </center> </td></tr><tr> <td> <div><!--[if mso]> <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="http://" style="height:50px;v-text-anchor:middle;width:200px;" arcsize="8%" stroke="f" fillcolor="#178f8f"> <w:anchorlock/> <center><![endif]--> <a href="{anchor}" target="blank" id="metaPrice"> R$ {price}</a><!--[if mso]> </center> </v:roundrect><![endif]--> </div><br><br></td></tr></table> <table style="margin: 0 auto;" cellpadding="0" cellspacing="0" class="force-full-width" bgcolor="#f5774e"> <tr> <td style="background-color:#f5774e;"> <table style="margin:0 auto;" cellspacing="0" cellpadding="0" class="force-width-80"> <tr> <td class="mobile-block"> <br><br><table cellspacing="0" cellpadding="0" class="force-full-width"> <tr> <td style="color:#ffffff; background-color:#ac4d2f; padding: 10px 0px;"> Pre√ßo anterior </td></tr><tr> <td style="color:#933f24; padding:10px 0px; background-color: #f7a084;"> R$ {last_price} </td></tr></table> <br></td></tr></table> <table style="margin: 0 auto;" cellspacing="0" cellpadding="0" class="force-width-80"> <tr> <td style="text-align:left; color:#933f24;"> <br><a style="color:#933f24" href="#"> Se o pre√ßo ainda n√£o estiver satisfat√≥rio, clique aqui e cadastre uma nova monitoria. <b style="color:#ffffff;" href="#">√â de gra√ßa!</b> </a> <br><br>Boas compras <br><br><br></td></tr></table> </td></tr></table> <table style="margin: 0 auto;" cellpadding="0" cellspacing="0" class="force-full-width" bgcolor="#414141" style="margin: 0 auto"> <tr> <td style="background-color:#414141;"> <br><br><img src="https://www.filepicker.io/api/file/R4VBTe2UQeGdAlM7KDc4" alt="google+"> <img src="https://www.filepicker.io/api/file/cvmSPOdlRaWQZnKFnBGt" alt="facebook"> <img src="https://www.filepicker.io/api/file/Gvu32apSQDqLMb40pvYe" alt="twitter"> <br><br></td></tr><tr> <td style="color:#bbbbbb; font-size:12px;"> <a href="#" class="sucint">Desinscrever</a> | <a class="sucint" href="mailto:monitor.precos@gmail.com" type="email">Contato</a> <br><br></td></tr><tr> <td style="color:#bbbbbb; font-size:12px;"> ¬© 2020 Todos os Direitos Reservados <br><br></td></tr></table> </td></tr></table> </center> </td></tr></table></body>
"""
